{% extends "pages/layouts/base.html" %}
{% load booking_extras %}

{% block content %}
<h1>Workshop Registration page</h1>
<h6>Search for Workshops on a specific date</h6>
<input id="date" type="date" value="2019-01-01">
<h5>Search all Workshops</h5>
<table style="width:100%">
    <tr>
        <th>Topic</th>
        <th>Start Date</th>
        <th>Finish Date</th>
        <th>Days</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th>Room</th>
        <th>No. Sessions</th>
        <th>Places Avail.</th>
        <th>Details</th>
    </tr>
    <!--
    <tr>
        <td>Introduction to Django</td>
        <td>10/04/2019</td>
        <td>10/04/2019</td>
        <td>Wed</td>
        <td>1200</td>
        <td>1400</td>
        <td>1</td>
        <td>50</td>
        <td>Details</td>
    </tr>
    -->
    {% if workshops.count > 0 %}
        {% for workshop in workshops %}
            <tr>
                <td>{{ workshop.skill_set_name }}</td>
                <td>{{ workshop.start_date }}</td>
                <td>{{ workshop.end_date }}</td>
                <td>{{ workshop.days }}</td>
                <td>{{ workshop.start_time }}</td>
                <td>{{ workshop.end_time }}</td>
                <td>{{ workshop.room }}</td>
                <td>{{ workshop.no_of_sessions }}</td>
                {% with num_enrolled=workshop.students.count %}
                    <td>{{ workshop.max_students|subtract:num_enrolled }}</td>
                {% endwith %}
                <td>Details..</td>
            </tr>
        {% endfor %}
    {% else %}
        <tr>
            <td colspan="10">There are currently no available Workshops.</td>
        </tr>
    {% endif %}


</table>{% endblock %}